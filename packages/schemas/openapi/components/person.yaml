# Shared identity fields used by both Person and ApplicationPerson
# Note: Due to JSON Schema limitations with allOf and additionalProperties,
# these fields are duplicated in Person and ApplicationPerson schemas.
# This section serves as documentation of the shared fields.
PersonIdentityFields:
  # name: Name
  # dateOfBirth: date
  # socialSecurityNumber: SocialSecurityNumber
  # gender: enum [male, female, unknown]
  # maritalStatus: enum [single, married, divorced, separated, widowed, civil_union, domestic_partnership]
  # isUSCitizen: boolean
  # citizenshipStatus: enum [citizen, permanent_resident, qualified_non_citizen, undocumented, other]
  type: object
  description: |
    Documentation schema showing core identity fields shared across Person and ApplicationPerson.
    These fields are defined inline in each schema due to JSON Schema allOf/additionalProperties limitations.

# Full Person resource for primary applicants
Person:
  type: object
  description: |
    Person resource representing a primary applicant. Created after application
    submission to maintain a persistent record of the individual.
  additionalProperties: false
  required:
    - id
    - name
    - dateOfBirth
    - createdAt
    - updatedAt
  properties:
    # Identity fields (shared with ApplicationPerson)
    name:
      $ref: "./common.yaml#/Name"
      description: Legal name of the person.
    dateOfBirth:
      type: string
      format: date
      description: Birth date of the person.
    socialSecurityNumber:
      $ref: "./common.yaml#/SocialSecurityNumber"
      description: Social Security Number for identity verification.
    gender:
      type: string
      description: Gender identity of the person.
      enum:
        - male
        - female
        - unknown
    maritalStatus:
      type: string
      description: Current marital status.
      enum:
        - single
        - married
        - divorced
        - separated
        - widowed
        - civil_union
        - domestic_partnership
    isUSCitizen:
      type: boolean
      description: Whether the person is a US citizen or national.
    citizenshipStatus:
      type: string
      description: Citizenship or immigration status relevant to benefits eligibility.
      enum:
        - citizen
        - permanent_resident
        - qualified_non_citizen
        - undocumented
        - other
    # Person-specific fields
    id:
      type: string
      format: uuid
      description: Unique identifier assigned to the person.
      readOnly: true
    email:
      $ref: "./common.yaml#/Email"
      description: Primary email address of the person.
    phoneNumber:
      $ref: "./common.yaml#/PhoneNumber"
      description: Primary phone number for contacting the person.
    address:
      $ref: "./common.yaml#/Address"
      description: Residential or mailing address of the person.
    householdSize:
      type: integer
      description: Total number of individuals sharing a household budget.
      minimum: 1
    householdId:
      type: string
      format: uuid
      description: Reference to the household this person belongs to.
    employmentStatus:
      type: string
      description: Current employment status.
      enum:
        - employed_full_time
        - employed_part_time
        - self_employed
        - unemployed
        - retired
        - student
    employerName:
      type: string
      description: Employer name if employed.
      maxLength: 150
    monthlyIncome:
      type: number
      description: Gross monthly income in local currency.
      minimum: 0
    incomeSources:
      type: array
      description: Reported sources contributing to the monthly income.
      items:
        type: string
        enum:
          - employment
          - self_employment
          - unemployment_benefits
          - social_security
          - disability_benefits
          - child_support
          - alimony
          - pension
          - other
    housingStatus:
      type: string
      description: Current housing situation.
      enum:
        - renting
        - own_home
        - staying_with_family_or_friends
        - shelter
        - unhoused
        - other
    languagePreference:
      type: string
      description: Preferred language for communications (BCP 47 language tag).
      pattern: "^[a-zA-Z]{2,3}(?:-[a-zA-Z0-9]{2,8})*$"
    disabilityStatus:
      type: boolean
      description: Indicates whether the person identifies as having a disability.
    veteranStatus:
      type: boolean
      description: Indicates whether the person has served in the armed forces.
    preferredContactMethod:
      type: string
      description: Preferred method of contact.
      enum:
        - phone
        - email
        - mail
        - sms
    consentToShareInformation:
      type: boolean
      description: Consent to share information with partner agencies.
    createdAt:
      type: string
      format: date-time
      description: Timestamp when the person record was created.
      readOnly: true
    updatedAt:
      type: string
      format: date-time
      description: Timestamp when the person record was last updated.
      readOnly: true
