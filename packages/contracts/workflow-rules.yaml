# Workflow Decision Rules
# Generated from spreadsheet tables — do not edit by hand.

$schema: ./schemas/rules-schema.yaml

version: "1.0"
domain: workflow

# Context variables available to rules.
# The state machine binds the governed entity — in workflow, this is the task.
context:
  - "task.*"

ruleSets:
  - id: task-assignment
    ruleType: assignment
    evaluation: first-match-wins
    rules:
      - id: assign-snap-to-snap-intake
        order: 1
        condition:
          "==":
            - var: task.programType
            - snap
        action:
          assignToQueue: snap-intake
        fallbackAction:
          assignToQueue: general-intake
        description: Route SNAP tasks to the snap-intake queue, fall back to general-intake

      - id: assign-default-to-general-intake
        order: 2
        condition: true
        action:
          assignToQueue: general-intake
        description: Route all other tasks to general-intake (catch-all)

  - id: task-priority
    ruleType: priority
    evaluation: first-match-wins
    rules:
      - id: expedited-tasks-get-expedited-priority
        order: 1
        condition:
          "==":
            - var: task.isExpedited
            - true
        action:
          setPriority: expedited
        description: Expedited tasks get expedited priority
