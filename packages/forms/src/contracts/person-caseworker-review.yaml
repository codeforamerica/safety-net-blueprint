form:
  id: person-caseworker-review
  title: Person Review
  schema: persons/PersonCreate
  layout: review
  pages:
    - id: personal-info
      title: Personal Information
      fields:
        - ref: name.firstName
          component: text-input
          width: half
        - ref: name.lastName
          component: text-input
          width: half
        - ref: dateOfBirth
          component: date-input
        - ref: socialSecurityNumber
          component: text-input
          hint: "XXX-XX-XXXX"
        - ref: phoneNumber
          component: text-input
          width: half
        - ref: email
          component: text-input
          width: half

    - id: demographics
      title: Demographics
      fields:
        - ref: demographicInfo.sex
          component: radio
        - ref: demographicInfo.maritalStatus
          component: select
        - ref: demographicInfo.isHispanicOrLatino
          component: radio
          labels:
            "true": "Yes"
            "false": "No"
        - ref: demographicInfo.race
          component: checkbox-group

    - id: citizenship
      title: Citizenship & Immigration
      fields:
        - ref: citizenshipInfo.status
          component: select
        - ref: citizenshipInfo.immigrationInfo.documentType
          component: text-input
          width: half
          show_when:
            field: citizenshipInfo.status
            not_equals: citizen
        - ref: citizenshipInfo.immigrationInfo.documentNumber
          component: text-input
          width: half
          show_when:
            field: citizenshipInfo.status
            not_equals: citizen
        - ref: citizenshipInfo.immigrationInfo.alienOrI94Number
          component: text-input
          width: half
          show_when:
            field: citizenshipInfo.status
            not_equals: citizen
        - ref: citizenshipInfo.immigrationInfo.documentExpirationDate
          component: date-input
          show_when:
            field: citizenshipInfo.status
            not_equals: citizen
        - ref: citizenshipInfo.immigrationInfo.hasSponsor
          component: radio
          labels:
            "true": "Yes"
            "false": "No"
          show_when:
            field: citizenshipInfo.status
            not_equals: citizen
        # Sponsor fields: compound condition using JSON Logic
        # Visible only when status != citizen AND hasSponsor == "true"
        - ref: citizenshipInfo.immigrationInfo.sponsor.name.firstName
          component: text-input
          width: half
          hint: Sponsor's first name
          show_when:
            jsonlogic:
              and:
                - "!=":
                    - var: citizenshipInfo.status
                    - citizen
                - "==":
                    - var: citizenshipInfo.immigrationInfo.hasSponsor
                    - "true"
        - ref: citizenshipInfo.immigrationInfo.sponsor.name.lastName
          component: text-input
          width: half
          hint: Sponsor's last name
          show_when:
            jsonlogic:
              and:
                - "!=":
                    - var: citizenshipInfo.status
                    - citizen
                - "==":
                    - var: citizenshipInfo.immigrationInfo.hasSponsor
                    - "true"
